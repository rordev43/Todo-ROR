<h1>Welcome, <%= current_user.email %></h1>

<h2>Your Tasks</h2>

<div class="d-flex align-items-center">
  <%= form_with(url: tasks_path, method: :get, class: "search-form") do |form| %>
    <div class="form-group">
      <%= form.label :search, "Search Tasks:" %>
      <%= form.text_field :search, class: "form-control", placeholder: "Enter a keyword" %>
    </div>
    <%= form.submit "Search", class: "btn btn-primary ml-2" %>
  <% end %>
</div>

<% @tasks.each do |task| %>
  <div class="">
    <strong>Description:</strong> <%= task.description %>
    <strong>Completed:</strong> <%= task.completed ? 'Yes' : 'No' %>
    <%= link_to 'Edit', edit_task_path(task) %>
    <%= button_to 'Delete', task, method: :delete, data: { confirm: 'Are you sure?' } %>
    <% if task.completed %>
      <%= button_to 'Mark as Incomplete', uncomplete_task_path(task), method: :patch %>
    <% else %>
      <%= button_to 'Mark as Complete', complete_task_path(task), method: :patch %>
    <% end %>
  </div>
<% end %>

<%= paginate @tasks %>

<h2>New Task</h2>
<%= render 'tasks/form', task: @task %>
<%= button_to 'Logout', destroy_user_session_path, method: :delete %>
